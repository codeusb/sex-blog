"use strict";(self.webpackChunksex_blog=self.webpackChunksex_blog||[]).push([[8915],{5178:(n,r,e)=>{e.r(r),e.d(r,{assets:()=>l,contentTitle:()=>i,default:()=>j,frontMatter:()=>s,metadata:()=>c,toc:()=>d});var t=e(3342),o=e(7131);const s={id:"hand_call_bind",title:"\u9762\u8bd5\u6574\u7406\u2014\u2014\u624b\u5199\u7cfb\u5217",tags:["\u9762\u7ecf"]},i=void 0,c={id:"interview/hand_call_bind",title:"\u9762\u8bd5\u6574\u7406\u2014\u2014\u624b\u5199\u7cfb\u5217",description:"\u524d\u8a00",source:"@site/docs/01-interview/02-hand-code.md",sourceDirName:"01-interview",slug:"/interview/hand_call_bind",permalink:"/sex-blog/docs/interview/hand_call_bind",draft:!1,unlisted:!1,tags:[{label:"\u9762\u7ecf",permalink:"/sex-blog/docs/tags/\u9762\u7ecf"}],version:"current",sidebarPosition:2,frontMatter:{id:"hand_call_bind",title:"\u9762\u8bd5\u6574\u7406\u2014\u2014\u624b\u5199\u7cfb\u5217",tags:["\u9762\u7ecf"]},sidebar:"tutorialSidebar",previous:{title:"\u9762\u8bd5\u6740\u624b\u950f\u2014\u2014\u8f93\u5165 URL \u5230\u7f51\u9875\u663e\u793a\uff0c\u53d1\u751f\u4e86\u4ec0\u4e48",permalink:"/sex-blog/docs/interview/01-in_url"},next:{title:"\u9762\u7ecf\u2014\u2014\u4e09\u5ea7\u5927\u5c71",permalink:"/sex-blog/docs/interview/three_point"}},l={},d=[{value:"\u524d\u8a00",id:"\u524d\u8a00",level:2},{value:"\u624b\u5199 new \u64cd\u4f5c\u7b26",id:"\u624b\u5199-new-\u64cd\u4f5c\u7b26",level:2},{value:"\u624b\u5199 call \u65b9\u6cd5",id:"\u624b\u5199-call-\u65b9\u6cd5",level:2},{value:"\u624b\u5199 bind \u65b9\u6cd5",id:"\u624b\u5199-bind-\u65b9\u6cd5",level:2},{value:"\u624b\u5199 apply \u65b9\u6cd5",id:"\u624b\u5199-apply-\u65b9\u6cd5",level:2},{value:"\u624b\u5199 \u6df1\u62f7\u8d1d",id:"\u624b\u5199-\u6df1\u62f7\u8d1d",level:2},{value:"\u624b\u5199 promise \u65b9\u6cd5",id:"\u624b\u5199-promise-\u65b9\u6cd5",level:2},{value:"\u9632\u6296",id:"\u9632\u6296",level:2},{value:"\u8282\u6d41",id:"\u8282\u6d41",level:2}];function h(n){const r={code:"code",em:"em",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h2,{id:"\u524d\u8a00",children:"\u524d\u8a00"}),"\n",(0,t.jsx)(r.p,{children:"\u9762\u8bd5\u4e2d\u5927\u6982\u7387\u4f1a\u51fa\u73b0\u624b\u5199\u4ee3\u7801\u7684\u60c5\u51b5\uff0c\u4f46\u662f\u5bf9\u6211\u6765\u8bf4\uff0c\u9762\u8bd5\u7684\u60c5\u51b5\u4e0b\u5b8c\u6210\u4e00\u4e2a\u5b8c\u5584\u7684\u624b\u5199\u662f\u6bd4\u8f83\u56f0\u96be\u7684\uff0c\u6240\u4ee5\u672c\u7bc7\u6587\u7ae0\u6bcf\u4e2a\u624b\u5199\u90fd\u4f1a\u6709\u9762\u8bd5\u7248\u548c\u5b8c\u5584\u7248\u4e24\u4e2a\u7248\u672c\uff0c\u9762\u8bd5\u7248\u4e00\u822c\u662f\u4e89\u53d6\u7528\u6700\u5c11\u4ee3\u7801\u5b8c\u6210\u4e3b\u8981\u529f\u80fd\u4ee5\u53ca\u4e3b\u8981\u77e5\u8bc6\u70b9\u7684\u8986\u76d6\uff0c\u5b8c\u5584\u7248\u5c31\u662f\u6263\u4e00\u4e9b\u7ec6\u8282(\u7ec6\u8282\u53ef\u80fd\u4e5f\u6709\u5f88\u591a)\u591a\u4e00\u4e9b\u4e00\u4e9b\u7279\u6b8a\u60c5\u51b5\u548c\u8fb9\u754c\u6761\u4ef6\u7684\u8003\u8651"}),"\n",(0,t.jsx)(r.h2,{id:"\u624b\u5199-new-\u64cd\u4f5c\u7b26",children:"\u624b\u5199 new \u64cd\u4f5c\u7b26"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"\u9762\u8bd5\u7248"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"const _new = (fn,...args) => {\r\n  const newObj = Object.create(fn.prototype)\r\n  fn.call(newObj, ...args)\r\n  return newObj\r\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"\u5b8c\u5584\u7248"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"const _new = (fn,...args) => {\r\n  const newObj = Object.create(fn.prototype)\r\n  const returnVal =  fn.call(newObj, ...args)\r\n  return returnVal instanceof Object ? returnVal : newObj\r\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:"\u6d4b\u8bd5"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"function Foo(x,y){\r\n  this.name = x\r\n  this.age = y\r\n}\r\n\r\nconst obj1 = _new(Foo,'\u5c0f\u660e',18)\r\nconst obj2 = new Foo('\u5c0f\u660e',18)\r\nconsole.log(obj1,obj2)\n"})}),"\n",(0,t.jsx)(r.h2,{id:"\u624b\u5199-call-\u65b9\u6cd5",children:"\u624b\u5199 call \u65b9\u6cd5"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"\u9762\u8bd5\u7248"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"Function.prototype.myCall = function(thisArg,...args){\r\n  thisArg = thisArg ?? window;\r\n  thisArg.fn = this // this === Function.prototype\r\n  const result = thisArg.fn(...args)\r\n  delete thisArg.fn;\r\n  return result\r\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"\u5b8c\u5584\u7248"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"Function.prototype.myCall = function (thisArg, ...args) {\r\n  thisArg = thisArg ?? window;\r\n  thisArg = Object(thisArg);\r\n  const fn = Symbol();\r\n  thisArg[fn] = this;\r\n  const result = thisArg[fn](...args);\r\n  delete thisArg[fn];\r\n  return result;\r\n};\n"})}),"\n",(0,t.jsx)(r.p,{children:"\u6d4b\u8bd5"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"const obj = {\r\n  a: 2,\r\n  fun: function (x) {\r\n    console.log(x);\r\n    return this.a;\r\n  },\r\n};\r\n\r\nconst cObj = {\r\n  a: 200,\r\n};\r\n\r\nconsole.log(obj.fun(1));\r\nconsole.log(obj.fun.call(cObj, 100));\r\nconsole.log(obj.fun.myCall(cObj, 100));\n"})}),"\n",(0,t.jsx)(r.h2,{id:"\u624b\u5199-bind-\u65b9\u6cd5",children:"\u624b\u5199 bind \u65b9\u6cd5"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"\u9762\u8bd5\u7248"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"Function.prototype.myBind = function(thisArg,...arg){\r\n  const fn = this;\r\n  function Fn(){\r\n    return fn.call(thisArg,...arg)\r\n  }\r\n  return Fn\r\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"\u5b8c\u5584\u7248"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"Function.prototype.myBind = function (thisArg, ...arg1) {\r\n  thisArg = thisArg ?? window\r\n  thisArg = Object(thisArg)\r\n  const originFn = this\r\n  function Fn (...arg2) {\r\n    const objThis = this instanceof Fn ? this : Object(thisArg)\r\n    return originFn.call(objThis, ...arg1, ...arg2)\r\n  }\r\n  if (originFn.prototype) {\r\n    Fn.prototype = originFn.prototype\r\n  }\r\n  return Fn\r\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:"\u6d4b\u8bd5"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"const obj = {\r\n  x: 42,\r\n  getX: function () {\r\n    return this.x;\r\n  },\r\n};\r\n\r\nconst unboundGetX = obj.getX;\r\nconsole.log(unboundGetX());\r\nconst boundGetX = unboundGetX.bind(obj);\r\nconsole.log(boundGetX());\r\nconst boundGetY = unboundGetX.myBind(obj);\r\nconsole.log(boundGetY());\n"})}),"\n",(0,t.jsx)(r.h2,{id:"\u624b\u5199-apply-\u65b9\u6cd5",children:"\u624b\u5199 apply \u65b9\u6cd5"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"\u9762\u8bd5\u7248"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"Function.prototype.myApply1 = function (thisArg, args) {\r\n  thisArg = thisArg ?? window\r\n  thisArg.fn = this // this === Function.prototype\r\n  args = Array.from(args)\r\n  const result = thisArg.fn(...args)\r\n  delete thisArg.fn\r\n  return result\r\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"\u5b8c\u5584\u7248"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.em,{children:"\u63d0\u793a: \u4ece\u6570\u7ec4\u548c\u7c7b\u6570\u7ec4\u5bf9\u8c61\u505a\u5224\u65ad"})}),"\n",(0,t.jsx)(r.h2,{id:"\u624b\u5199-\u6df1\u62f7\u8d1d",children:"\u624b\u5199 \u6df1\u62f7\u8d1d"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"\u9762\u8bd5\u7248"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"const deepCopy1 = (obj) => {\r\n  if (typeof obj !== 'object') return obj\r\n\r\n  let newObj = Array.isArray(obj) ? [] : {}\r\n\r\n  for (let key in obj) {\r\n    if (obj.hasOwnProperty(key)) {\r\n      if (typeof obj[key] === 'object') {\r\n        newObj[key] = deepCopy1(obj[key])\r\n      } else {\r\n        newObj[key] = obj[key]\r\n      }\r\n    }\r\n  }\r\n  return newObj\r\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"\u5b8c\u5584\u7248"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"const deepCopy = (obj, cache = new WeakMap()) => {\r\n  if (obj === null || typeof obj !== 'object') {\r\n    return obj\r\n  }\r\n  if (cache.has(obj)) { // \u5faa\u73af\u5f15\u7528\r\n    return cache.get(obj)\r\n  }\r\n\r\n  let newObj = Array.isArray(obj) ? [] : {}\r\n\r\n  cache.set(obj, newObj)\r\n\r\n  Reflect.ownKeys(obj).forEach(key => {\r\n    if (obj[key] === null || typeof obj[key] !== 'object') {\r\n      newObj[key] = obj[key]\r\n    } else {\r\n      newObj[key] = deepCopy(obj[key], cache)\r\n    }\r\n  })\r\n\r\n  return newObj\r\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:"\u6d4b\u8bd5"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"const obj = {\r\n  a:'123',\r\n  c:{\r\n    a:'1'\r\n  }\r\n}\r\n\r\nconst cObj = deepCopy(obj)\r\nconsole.log(cObj)\n"})}),"\n",(0,t.jsx)(r.h2,{id:"\u624b\u5199-promise-\u65b9\u6cd5",children:"\u624b\u5199 promise \u65b9\u6cd5"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"\u9762\u8bd5\u7248"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"function Promise(fn) {\r\n  this.cbs = [];\r\n\r\n  const resolve = (value) => {\r\n    setTimeout(() => {\r\n      this.data = value;\r\n      this.cbs.forEach((cb) => cb(value));\r\n    });\r\n  };\r\n\r\n  fn(resolve);\r\n}\r\n\r\nPromise.prototype.then = function (onResolved) {\r\n  return new Promise((resolve) => {\r\n    this.cbs.push(() => {\r\n      const res = onResolved(this.data);\r\n      if (res instanceof Promise) {\r\n        res.then(resolve);\r\n      } else {\r\n        resolve(res);\r\n      }\r\n    });\r\n  });\r\n};\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.em,{children:"\u6838\u5fc3\uff1athen \u65b9\u6cd5\u94fe\u5f0f\u8c03\u7528"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"\u5b8c\u5584\u7248"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"// TODO\n"})}),"\n",(0,t.jsx)(r.h2,{id:"\u9632\u6296",children:"\u9632\u6296"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"\u9762\u8bd5\u7248"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"const debounce = (fn, delay) => {\r\n  let timer = null\r\n\r\n  return function(){\r\n    if(timer){\r\n      clearTimeout(timer)\r\n    }\r\n    timer = setTimeout(() => {\r\n      fn.apply(this, arguments)\r\n      timer = null\r\n    }, delay)\r\n  }\r\n}\n"})}),"\n",(0,t.jsx)(r.h2,{id:"\u8282\u6d41",children:"\u8282\u6d41"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"\u9762\u8bd5\u7248"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"const throttle = (fn, delay) => {\r\n  let timer = null\r\n\r\n  return function(){\r\n    if(timer){\r\n      return\r\n    }\r\n    timer = setTimeout(() => {\r\n      fn.apply(this, arguments)\r\n      timer = null\r\n    }, delay)\r\n  }\r\n}\n"})})]})}function j(n={}){const{wrapper:r}={...(0,o.a)(),...n.components};return r?(0,t.jsx)(r,{...n,children:(0,t.jsx)(h,{...n})}):h(n)}},7131:(n,r,e)=>{e.d(r,{Z:()=>c,a:()=>i});var t=e(9685);const o={},s=t.createContext(o);function i(n){const r=t.useContext(s);return t.useMemo((function(){return"function"==typeof n?n(r):{...r,...n}}),[r,n])}function c(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:i(n.components),t.createElement(s.Provider,{value:r},n.children)}}}]);