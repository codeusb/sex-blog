<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-interview/01-in_url" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">面试杀手锏——输入 URL 到网页显示，发生了什么 | Sexxion</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://codeusb.github.io/sex-blog/docs/interview/01-in_url"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="面试杀手锏——输入 URL 到网页显示，发生了什么 | Sexxion"><meta data-rh="true" name="description" content="前言"><meta data-rh="true" property="og:description" content="前言"><link data-rh="true" rel="icon" href="/sex-blog/img/spike.ico"><link data-rh="true" rel="canonical" href="https://codeusb.github.io/sex-blog/docs/interview/01-in_url"><link data-rh="true" rel="alternate" href="https://codeusb.github.io/sex-blog/docs/interview/01-in_url" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://codeusb.github.io/sex-blog/docs/interview/01-in_url" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/sex-blog/blog/rss.xml" title="Sexxion RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/sex-blog/blog/atom.xml" title="Sexxion Atom Feed"><link rel="stylesheet" href="/sex-blog/assets/css/styles.f92908da.css">
<script src="/sex-blog/assets/js/runtime~main.c5bfe0c1.js" defer="defer"></script>
<script src="/sex-blog/assets/js/main.70181a44.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_h0_E" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><div class="announcementBar_qqSv" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarPlaceholder_J2oy"></div><div class="content_N99m announcementBarContent_NILe">⭐如果您喜欢这个网站,请在 GitHub 上给它一颗星！ <a target="_blank" rel="noopener noreferrer" href="https://github.com/codeusb/sex-blog">GitHub</a></div><button type="button" aria-label="关闭" class="clean-btn close closeButton_Xsbb announcementBarClose_BRiV"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/sex-blog/"><b class="navbar__title text--truncate">Sexxion_XX</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/sex-blog/docs/introduction">文档</a><a class="navbar__item navbar__link" href="/sex-blog/blog">博客</a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_I_oN"></div><a href="https://github.com/codeusb" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github"></a><a href="https://juejin.cn/user/2124701246954029" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link xtjj"></a><a href="https://leetcode.cn/u/sexxion__xx/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link leetcode"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">友链</a><ul class="dropdown__menu"><li><a href="https://github.com/codeusb" target="_blank" rel="noopener noreferrer" class="dropdown__link">Github<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I7n5"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="toggle_Fxtu colorModeToggle_k2uP"><button class="clean-btn toggleButton_iB4o toggleButtonDisabled_Fwcu" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_AuLv"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_n67O"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_yTNo"><div class="docsWrapper_VEev"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_THrl" type="button"></button><div class="docRoot_sFTF"><aside class="theme-doc-sidebar-container docSidebarContainer_NdBa"><div class="sidebarViewport_vKdN"><div class="sidebar_AzPk"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_O8xW menuWithAnnouncementBar_hkwc"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sex-blog/docs/introduction">介绍</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/sex-blog/docs/category/面经">面经</a><button aria-label="折叠侧边栏分类 &#x27;面经&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/sex-blog/docs/interview/01-in_url">面试杀手锏——输入 URL 到网页显示，发生了什么</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sex-blog/docs/interview/hand_call_bind">面试整理——手写系列</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sex-blog/docs/interview/three_point">面经——三座大山</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/sex-blog/docs/category/react">React</a><button aria-label="展开侧边栏分类 &#x27;React&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/sex-blog/docs/category/阅读">阅读</a><button aria-label="展开侧边栏分类 &#x27;阅读&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/sex-blog/docs/category/算法">算法</a><button aria-label="展开侧边栏分类 &#x27;算法&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/sex-blog/docs/category/每周记录">每周记录</a><button aria-label="展开侧边栏分类 &#x27;每周记录&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_JYmm"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_aZdW"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_PwRY"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_rLyA"><div class="docItemContainer_KhLO"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_T9Rx" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/sex-blog/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_u2Xu"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/sex-blog/docs/category/面经"><span itemprop="name">面经</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">面试 杀手锏——输入 URL 到网页显示，发生了什么</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ueVI theme-doc-toc-mobile tocMobile_qx2C"><button type="button" class="clean-btn tocCollapsibleButton_fpBF">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>面试杀手锏——输入 URL 到网页显示，发生了什么</h1></header><h2 class="anchor anchorWithStickyNavbar_QCgy" id="前言">前言<a href="#前言" class="hash-link" aria-label="前言的直接链接" title="前言的直接链接">​</a></h2>
<p>最近在准备秋招，网上关于这道经典问题的文章特别多，看了很多大佬的文章后打算自己也总结下。</p>
<p>叠个甲：本篇较多内容来自网络大佬文章。但是因为文章比较多，部分知识/观点的参考网站可能没有在最后贴出，如果有大佬发现的话请联系我添加。或者不允许转载我会马上处理下的。</p>
<p>开始前我再谈谈我对这道面试题的想法。我个人认为这是一道好题。因为这道题覆盖的知识面很广，广的可以没有边界。比如通过层层推演一直讲到操作系统底层或者更深(在学习过程中有几位大佬就从 url 讲到了操作系统)。我的感觉是震惊+喜悦的，从知识边界往外探索的感觉很爽。但是我目前的技术能力无法全部理解(前端菜鸟)。所以本篇的整理是到我目前的知识边界的。</p>
<p>另外，<strong>从这道题出发，对前端体系知识的扩展(甚至是对计算机体系知识)才是我认为应该学习的东西，由点到面</strong>。所以本文会有大量的思考拓展，主要的形式是抛出一些问题(发现问题也是学习过程中重要的一环)，交给大家去思考。<strong>特别建议你在评论区发表出你对一些问题/观点/知识的看法/补充/改正</strong>。这样的碰撞也是很关键的一环。</p>
<h2 class="anchor anchorWithStickyNavbar_QCgy" id="思路">思路<a href="#思路" class="hash-link" aria-label="思路的直接链接" title="思路的直接链接">​</a></h2>
<p>我将<strong>输入 URL 到网页显示，发生了什么</strong>的过程大体分为 3 个阶段，而每个大阶段下又分了几个关键节点：</p>
<p>1.浏览器发起请求阶段</p>
<ul>
<li>
<p>1.1 URL 解析</p>
</li>
<li>
<p>1.2 DNS 寻址</p>
<p>2.网络通信阶段</p>
</li>
<li>
<p>2.1 客户端发起 HTTP 请求</p>
</li>
<li>
<p>2.2 建立 TCP 连接（三次握手）</p>
</li>
<li>
<p>2.3 网络传输</p>
</li>
<li>
<p>2.4 服务器端处理</p>
</li>
<li>
<p>2.5 断开 TCP 连接（四次挥手）</p>
<p>3.浏览器处理响应阶段</p>
</li>
<li>
<p>3.1 浏览器获取响应及预处理</p>
</li>
<li>
<p>3.2 浏览器渲染 HTML</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_QCgy" id="浏览器发起请求">浏览器发起请求<a href="#浏览器发起请求" class="hash-link" aria-label="浏览器发起请求的直接链接" title="浏览器发起请求的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QCgy" id="11-url-解析">1.1 URL 解析<a href="#11-url-解析" class="hash-link" aria-label="1.1 URL 解析的直接链接" title="1.1 URL 解析的直接链接">​</a></h3>
<p>  当用户开始在导航栏上面输入内容时，浏览器 Browser 进程的 UI 线程开始<strong>处理输入</strong>，UI 线程判断输入的是 URL 地址还是搜索关键字，是搜索关键字就发送给浏览器默认搜索引擎，是 URL 地址就开始 URL 解析(一般是通过协议、域名、路径等确定服务器地址)</p>
<p><em>思考</em></p>
<p>1.<code>UI线程判断输入的是URL地址还是搜索关键字</code>是否是即时的？目的是什么？</p>
<p>2.<code>浏览器Browser进程的UI线程</code>现代浏览器的基本架构？进程与线程的关系？</p>
<h3 class="anchor anchorWithStickyNavbar_QCgy" id="12-dns-寻址">1.2 DNS 寻址<a href="#12-dns-寻址" class="hash-link" aria-label="1.2 DNS 寻址的直接链接" title="1.2 DNS 寻址的直接链接">​</a></h3>
<p>  当用户输入完毕按下回车键的时候，UI 线程会通知网络线程初始化一个网络请求，进而<strong>开始导航</strong>，这时候 tab 标签页上会展示一个提示资源正在加载中的旋转圈圈，而且网络线程会进行一系列诸如 DNS 寻址以及为请求建立 TLS 连接等的操作(操作有很多，这里只是简单概括下)。</p>
<p>如果网络线程收到服务器的<em>HTTP 301 重定向响应</em>，它就会告知 UI 线程进行重定向然后它会再次发起一个新的网络请求。</p>
<p><em>思考</em></p>
<p>1.<code>UI线程会通知网络线程</code>线程间通信？(这里至少有三个问题哦!)</p>
<p>2.<code>网络线程</code>网络线程与网络进程？</p>
<p><strong>DNS 寻址</strong>的主要目的是把 url 地址转为服务器 ip 地址。这其中会有一个 DNS 缓存查找过程：</p>
<p>如图所示
<img loading="lazy" alt="dns_cache" src="/sex-blog/assets/images/dns_cache-91a98beb1230acecfb1a5be2a729cb5b.png" width="809" height="451" class="img_uBty"></p>
<p><em>思考</em></p>
<p>1.初次请求和二次请求后那些地方会对 DNS 进行缓存</p>
<h2 class="anchor anchorWithStickyNavbar_QCgy" id="网络通信">网络通信<a href="#网络通信" class="hash-link" aria-label="网络通信的直接链接" title="网络通信的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QCgy" id="21-客户端发起-http-请求">2.1 客户端发起 HTTP 请求<a href="#21-客户端发起-http-请求" class="hash-link" aria-label="2.1 客户端发起 HTTP 请求的直接链接" title="2.1 客户端发起 HTTP 请求的直接链接">​</a></h3>
<p>  客户端(浏览器)发起 HTTP 请求，构建 HTTP 报文通过<strong>应用层</strong>协议（如 HTTP 协议）封装</p>
<p><strong>缓存</strong></p>
<p>浏览器发送请求前，根据请求头的 expires 和 cache-control 判断是否命中（包括是否过期）<strong>强缓存</strong>策略，如果命中，直接从缓存获取资源，并不会发送请求。如果没有命中，则进入下一步。</p>
<p>没有命中强缓存规则，浏览器会发送请求，根据请求头的 If-Modified-Since 和 If-None-Match 判断是否命中<strong>协商缓存</strong>，如果命中，直接从缓存获取资源。如果没有命中，则进入下一步。</p>
<p>如果前两步都没有命中，则直接从服务端获取资源。</p>
<h3 class="anchor anchorWithStickyNavbar_QCgy" id="22-建立-tcp-连接三次握手">2.2 建立 TCP 连接（三次握手）<a href="#22-建立-tcp-连接三次握手" class="hash-link" aria-label="2.2 建立 TCP 连接（三次握手）的直接链接" title="2.2 建立 TCP 连接（三次握手）的直接链接">​</a></h3>
<p>第一步：客户端发送 SYN（Synchronize）包给服务端。</p>
<ul>
<li>1.客户端将序列号（Sequence Number）设为一个随机数 A，同时将标志位 SYN 置为 1，表示请求建立连接。</li>
<li>2.客户端进入 SYN_SENT 状态，并等待服务端的响应。</li>
</ul>
<p>第二步：服务端收到 SYN 包后，回复 ACK（Acknowledgment）包和 SYN 包给客户端。</p>
<ul>
<li>1.服务端将序列号设为一个随机数 B，同时将标志位 SYN 和 ACK 置为 1，表示接受客户端的请求，同时确认客户端的序列号。</li>
<li>2.服务端将确认序列号（Acknowledgment Number）设为客户端的序列号加 1。</li>
<li>3.服务端进入 SYN_RCVD 状态。</li>
</ul>
<p>第三步：客户端收到服务端的 ACK + SYN 包后，回复一个 ACK 包给服务端。</p>
<ul>
<li>1.客户端将确认序列号设为服务端的序列号加 1。</li>
<li>2.客户端将标志位 ACK 置为 1，表示对服务端的响应。</li>
<li>3.客户端进入 ESTABLISHED 状态，表示连接已经建立。</li>
</ul>
<p>这块是面试重点区。部分的问题在四次挥手部分展示</p>
<p><strong>HTTPS</strong></p>
<p>如果是 HTTPS 协议，<strong>在 TCP 三次握手后</strong>，还要 再进行 TLS 四次握手</p>
<p>大概流程：</p>
<ul>
<li>1.client hello</li>
<li>2.server hello</li>
<li>3.client 验证证书，生成 secret</li>
<li>4.server 生成 secret</li>
</ul>
<p><em>思考</em></p>
<p>1.SSL 和 TSL 的关系？</p>
<h3 class="anchor anchorWithStickyNavbar_QCgy" id="23-网络传输">2.3 网络传输<a href="#23-网络传输" class="hash-link" aria-label="2.3 网络传输的直接链接" title="2.3 网络传输的直接链接">​</a></h3>
<p>  上面一个是应用层，一个是传输层。根据网络参考模型，传输层后还有网络层(IP 数据报相关知识点)，数据链路层(祯相关知识点)，物理层(起传输作用)。</p>
<p>PS：等待大佬补充 0.0</p>
<p><em>思考</em></p>
<p>关于七层网络参考模型的相关知识点</p>
<h3 class="anchor anchorWithStickyNavbar_QCgy" id="24-服务器端处理">2.4 服务器端处理<a href="#24-服务器端处理" class="hash-link" aria-label="2.4 服务器端处理的直接链接" title="2.4 服务器端处理的直接链接">​</a></h3>
<p>服务器接收并处理 HTTP 请求</p>
<p>服务器生成 HTTP 响应并发送回客户端（返回资源/数据）</p>
<p>PS：等待大佬补充 0.0</p>
<h3 class="anchor anchorWithStickyNavbar_QCgy" id="25-断开-tcp-连接四次挥手">2.5 断开 TCP 连接（四次挥手）<a href="#25-断开-tcp-连接四次挥手" class="hash-link" aria-label="2.5 断开 TCP 连接（四次挥手）的直接链接" title="2.5 断开 TCP 连接（四次挥手）的直接链接">​</a></h3>
<p>  把断开 TCP 连接放在这里说了。目前主流的 http1.1 支持长连接(Connection<!-- -->:keep-active<!-- -->),不用每次请求都进行三次握手四次挥手。</p>
<p>第一步：客户端发送一个 FIN（Finish）包给服务端。</p>
<ul>
<li>客户端将标志位 FIN 置为 1，表示请求断开连接。</li>
<li>客户端进入 FIN_WAIT_1 状态。</li>
</ul>
<p>第二步：服务端收到 FIN 包后，发送一个 ACK（Acknowledgment）包给客户端作为确认。</p>
<ul>
<li>服务端将标志位 ACK 置为 1，确认客户端的 FIN 包。</li>
<li>服务端进入 CLOSE_WAIT 状态。</li>
<li>此时客户端进入 FIN_WAIT_2 状态，等待服务端发送自己的 FIN 包。</li>
</ul>
<p>第三步：服务端发送一个自己的 FIN 包给客户端。</p>
<ul>
<li>服务端将标志位 FIN 置为 1，表示自己也准备断开连接。</li>
<li>服务端将确认序列号设为客户端的序列号加 1。</li>
<li>服务端进入 LAST_ACK 状态。</li>
</ul>
<p>第四步：客户端收到服务端的 FIN 包后，回复一个 ACK 包给服务端作为确认。</p>
<ul>
<li>客户端将标志位 ACK 置为 1，确认服务端的 FIN 包。</li>
<li>客户端将确认序列号设为服务端的序列号加 1。</li>
<li>客户端进入 TIME_WAIT 状态，等待一段时间后关闭连接。</li>
</ul>
<p><em>思考</em></p>
<p>1.为什么三次握手？四次挥手？(3or4?)</p>
<p>2.为什么不是两次握手？</p>
<p>3.如果已经建立连接，客户端突然出现故障怎么办？</p>
<h2 class="anchor anchorWithStickyNavbar_QCgy" id="浏览器处理响应">浏览器处理响应<a href="#浏览器处理响应" class="hash-link" aria-label="浏览器处理响应的直接链接" title="浏览器处理响应的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QCgy" id="31-浏览器获取响应及预处理">3.1 浏览器获取响应及预处理<a href="#31-浏览器获取响应及预处理" class="hash-link" aria-label="3.1 浏览器获取响应及预处理的直接链接" title="3.1 浏览器获取响应及预处理的直接链接">​</a></h3>
<p>  浏览器<strong>网络线程</strong>接收到服务器返回的资源/数据，解析并将数据转发给<strong>浏览器进程</strong>。不同类型的资源根据其 MIME 类型(一般通过 HTTP 头部的 Content-Type 来确定)，被相应的引擎处理和加载执行。（响应主体是 HTML 文件，通知<strong>渲染进程</strong>准备进行渲染，如果是压缩 文件就会交给下载管理器）</p>
<h3 class="anchor anchorWithStickyNavbar_QCgy" id="32-浏览器渲染">3.2 浏览器渲染<a href="#32-浏览器渲染" class="hash-link" aria-label="3.2 浏览器渲染的直接链接" title="3.2 浏览器渲染的直接链接">​</a></h3>
<p>  <em>ps:进入前端领域！</em></p>
<p>注：GUI 渲染线程与 JS 引擎线程互斥</p>
<p><strong>GUI 渲染线程</strong></p>
<ul>
<li>
<p>HTML 解析器解析 HTML，构建<strong>DOM 树</strong></p>
<p>转换=》令牌化=》词法分析=》DOM 构建</p>
</li>
<li>
<p>解析 CSS，生成<strong>CSSOM 树</strong></p>
<p>css 解析是从右到左的</p>
</li>
<li>
<p>合并 DOM 树和 CSS 规则树，生成<strong>render 树</strong></p>
</li>
<li>
<p><strong>布局</strong>render 树（layout/reflow），负责各元素尺寸、位置的计算</p>
</li>
<li>
<p><strong>绘制</strong>render 树（paint/repaint），绘制页面像素信息</p>
</li>
<li>
<p><strong>分层、光栅化</strong>，合成线程执行绘制操作，将图层分为图块(Tiles)，由栅格化线程将图块转化位图</p>
</li>
<li>
<p><strong>合成、显示</strong>，浏览器会将各层的信息发送给 GPU，GPU 会将各层合成（composite），显示在屏幕上</p>
</li>
</ul>
<p>经典图
<img loading="lazy" alt="dns_cache" src="/sex-blog/assets/images/render-a258ddeb85bbd050579da4787e8e9dad.jpg" width="900" height="352" class="img_uBty"></p>
<p><strong>JS 引擎线程</strong></p>
<p>当解析 HTML 时遇到 JS 脚本会停止 GUI 渲染线程,JS 引擎线程开始工作。</p>
<p><em>思考</em></p>
<p>1.<code>GUI渲染线程与JS引擎线程互斥</code>为什么？</p>
<p>2.这里做一个引，这部分就是 JS 的内容，从 V8 引擎开始到 JS 执行上下文，事件循环机制，垃圾回收机制。这些知识也再整理中，可以期待下。</p>
<h2 class="anchor anchorWithStickyNavbar_QCgy" id="站在巨人的肩上">站在巨人的肩上<a href="#站在巨人的肩上" class="hash-link" aria-label=" 站在巨人的肩上的直接链接" title="站在巨人的肩上的直接链接">​</a></h2>
<p>本文很多观点/知识都来源于互联网上的前辈大佬们的文章，感谢 🍑🍑🍑</p>
<p>如果文中有误，还望指出。</p>
<p><a href="https://zhuanlan.zhihu.com/p/102149546" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/102149546</a></p>
<p><a href="https://juejin.cn/post/6844903574535667719#heading-16" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/6844903574535667719#heading-16</a></p>
<p><a href="https://juejin.cn/post/6935232082482298911?searchId=202308211925443A86748DAA5DDDD77716#heading-44" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/6935232082482298911?searchId=202308211925443A86748DAA5DDDD77716#heading-44</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/80551769" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/80551769</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>标签：</b><ul class="tags_Z4Ns padding--none margin-left--sm"><li class="tag_ezds"><a class="tag_oVUG tagRegular_V0VZ" href="/sex-blog/docs/tags/面经">面经</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/sex-blog/docs/category/面经"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">面经</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/sex-blog/docs/interview/hand_call_bind"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">面试整理——手写系列</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_GB5f thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#前言" class="table-of-contents__link toc-highlight">前言</a></li><li><a href="#思路" class="table-of-contents__link toc-highlight">思路</a></li><li><a href="#浏览器发起请求" class="table-of-contents__link toc-highlight">浏览器发起请求</a><ul><li><a href="#11-url-解析" class="table-of-contents__link toc-highlight">1.1 URL 解析</a></li><li><a href="#12-dns-寻址" class="table-of-contents__link toc-highlight">1.2 DNS 寻址</a></li></ul></li><li><a href="#网络通信" class="table-of-contents__link toc-highlight">网络通信</a><ul><li><a href="#21-客户端发起-http-请求" class="table-of-contents__link toc-highlight">2.1 客户端发起 HTTP 请求</a></li><li><a href="#22-建立-tcp-连接三次握手" class="table-of-contents__link toc-highlight">2.2 建立 TCP 连接（三次握手）</a></li><li><a href="#23-网络传输" class="table-of-contents__link toc-highlight">2.3 网络传输</a></li><li><a href="#24-服务器端处理" class="table-of-contents__link toc-highlight">2.4 服务器端处理</a></li><li><a href="#25-断开-tcp-连接四次挥手" class="table-of-contents__link toc-highlight">2.5 断开 TCP 连接（四次挥手）</a></li></ul></li><li><a href="#浏览器处理响应" class="table-of-contents__link toc-highlight">浏览器处理响应</a><ul><li><a href="#31-浏览器获取响应及预处理" class="table-of-contents__link toc-highlight">3.1 浏览器获取响应及预处理</a></li><li><a href="#32-浏览器渲染" class="table-of-contents__link toc-highlight">3.2 浏览器渲染</a></li></ul></li><li><a href="#站在巨人的肩上" class="table-of-contents__link toc-highlight">站在巨人的肩上</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>